<ng-container *ngIf="isOpen$ | async as isOpen">
    <el-dialog [attr.open]="isOpen">
        <dialog id="dialog" aria-labelledby="dialog-title"
            class="fixed inset-0 size-auto max-h-none max-w-none overflow-y-auto bg-transparent backdrop:bg-transparent">
            <el-dialog-backdrop
                class="fixed inset-0 bg-gray-900/50 transition-opacity data-closed:opacity-0 data-enter:duration-300 data-enter:ease-out data-leave:duration-200 data-leave:ease-in"></el-dialog-backdrop>

            <div tabindex="0"
                class="flex items-end justify-center p-4 text-center focus:outline-none sm:items-center sm:p-0">
                <el-dialog-panel
                    class="relative transform overflow-hidden rounded-lg bg-gray-800 text-left shadow-xl outline -outline-offset-1 outline-white/10 transition-all data-closed:translate-y-4 data-closed:opacity-0 data-enter:duration-300 data-enter:ease-out data-leave:duration-200 data-leave:ease-in sm:my-8 sm:w-full sm:max-w-lg data-closed:sm:translate-y-0 data-closed:sm:scale-95">

                    <ng-container *ngIf="modalConfig$ | async as config">
                        <!-- Header -->
                        <div class="bg-gray-700/25 px-4 py-3 sm:flex sm:flex-row-reverse">
                            <h2 id="dialog-title" class="text-lg font-medium leading-6 text-white flex-1 text-left">
                                {{ config.title }}
                            </h2>
                        </div>

                        <!-- Content -->
                        <div class="bg-gray-800 px-4 py-4 text-white">
                            <ng-container *ngIf="config.template; else contentOrProjected">
                                <ng-container *ngTemplateOutlet="config.template; context: { $implicit: config }">
                                </ng-container>
                            </ng-container>
                            <ng-template #contentOrProjected>
                                <ng-container *ngIf="config.content; else projectedContent">
                                    <p>{{ config.content }}</p>
                                </ng-container>
                                <ng-template #projectedContent>
                                    <ng-content></ng-content>
                                </ng-template>
                            </ng-template>
                        </div>

                        <!-- Footer - Mostrar si hay template o content (confirmaciÃ³n) -->
                        <div *ngIf="config.template || config.content"
                            class="bg-gray-700/25 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6">
                            <button type="button" (click)="onConfirm()"
                                [ngClass]="config.isDanger ? 'bg-red-500 hover:bg-red-400' : 'bg-blue-500 hover:bg-blue-400'"
                                class="inline-flex w-full justify-center rounded-md px-3 py-2 text-sm font-semibold text-white sm:ml-3 sm:w-auto">
                                {{ config.confirmText || ('modal.confirm' | translate) }}
                            </button>
                            <button type="button" (click)="onCancel()"
                                class="mt-3 inline-flex w-full justify-center rounded-md bg-white/10 px-3 py-2 text-sm font-semibold text-white hover:bg-white/20 sm:mt-0 sm:w-auto">
                                {{ config.cancelText || ('modal.cancel' | translate) }}
                            </button>
                        </div>
                    </ng-container>
                </el-dialog-panel>
            </div>
        </dialog>
    </el-dialog>
</ng-container>